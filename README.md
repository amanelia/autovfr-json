AutoVFR -JSON中間ファイル出力プログラム-
---------------

About
----------
AviSynthのAuto_VFR関数で生成したログから直接avsファイルへ書き出さずにJSONファイルへ  
一旦書き出してほかのスクリプトでも使用できるようにします。  

ビルド環境
----------
* gcc (4.9.2)
* libjson (0.11) 必須  

特別な関数は使用していないのでMinGW-w64でもビルド出来ます。  
クロスコンパイルする場合はMakefile内のCC=gccを変更して下さい。

使いかた
----------
1. テロップやムービングロゴがない素材  
  `./autovfr -i "AutoVFRログファイル" -o "jsonファイル"`

2. テロップ・ムービングロゴがあるもの  
  `./autovfr -i "AutoVFRログファイル" -o "jsonファイル" --bob`

今後オプションは増えていく予定です()

出力JSONファイルについて
----------
出力されるフレーム数などは必ず5で割れるようになっています。  

### 出力ファイル例 ###

    {
        "cadence": [
            {
                "start": 0,
                "end": 1274,
                "type": "pref0"
            },
            {
                "start": 1275,
                "end": 4439,
                "type": "pref1"
            }
            ],
        "comb": [
            {
                "frame": 1225,
                "cur-ref": "pref0",
                "have-pair": false,
                "ref": "pref1"
            },
            {
                "frame": 1450,
                "cur-ref": "pref1",
                "have-pair": true,
                "ref": "-",
                "pair-a": 0,
                "pair-b": 4
            }
        ]
    }

### 各オブジェクトの説明 ###

* `cadance` :周期リストの配列です  
  `type` :  
  周期の種類です。pref(X)[Xは0から4の数値]か、bobが入ります。  
  `start, end` :  
  上記周期の開始フレームと終了フレームです。  

* `comb` :解除縞リストの配列です(*不完全です*)  
  `frame` :  
  解除縞が存在する**フレームブロック数**です。  
  (例：frame == 1450なら 1450〜1454フレーム内**いずれかに**縞フレームがあります)  
  `cur-ref` :  
  このフレームブロックが解除される周期です。pref(X)な値が入ります。  
  `ref` :  
  このフレームブロックが**解除できるであろう値**です。pref(X)な値がはいります。  
  **必ずしもこの周期で解除できるわけではありません**  
  `have-pair` :  
  周期候補が複数(2つ)ある場合、trueになります。  
  この値がtrueな時は`ref`に入る文字列は必ず"-"です。  
  `pair-a, pair-b` :  
  解除できるであろう周期の候補です。X[0〜4]な数値が入ります。  
  `have-pair`がfalseの場合はこのオブジェクトはありません。  
  **必ずしもこれらの周期で解除できるわけではありません**  


仕様(これ重要)
----------
* オリジナルなAutoVFR.exeとの互換性は全くありません。  
  そのためオリジナルのAutoVFRと出力結果が異なります。  
* 動かないフレームは前の周期と同一視しているので分割される部分が  
  多少前後する可能性があります。  
* ムービングロゴなど短いBOBや周期はスキップすることが出来ません。  

アルゴリズム
----------
### 後に公開(すでにやる気なし) ###

更新履歴
----------
* *2015.08.11: 新規作成*  

URLなど
----------

[本家](http://putin999.blog.fc2.com/ "メモ置き場") 2015.08.11確認  

[やる気がなく、仕様が書けない自分のTwitter](https://twitter.com/amanelia)  

*2015.08.11 README作成*
